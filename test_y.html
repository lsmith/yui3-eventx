<!doctype html>
<html>
<head>
    <title>Test Page</title>
</head>
<body class="yui3-skin-sam">

<script src="http://yui.yahooapis.com/3.8.1/build/yui/yui.js"></script>
<script src="event.js"></script>
<script src="event-dynamic.js"></script>
<script src="event-y.js"></script>
<script>
YUI({
    filter: 'raw'
}).use('eventx-y', function (Y) {

Y.publish({
    bar: {
        defaultFn: function () {
            console.log("bar event behavior");
        },
        preventedFn: function () {
            console.log("bar behavior prevented");
        }
    },
    onetime: {
        fireOnce: true,
        defaultFn: function () {
            console.log("One Time event behavior - this should only be logged once");
        }
    }
});

Y.on("test", function (e) {
    console.log("Should be #1", e);
});

Y.after("test", function (e) {
    console.log("Should be last", e);
});

Y.on("test", function (e) {
    console.log("Should be #2", e);
});

Y.on("test", function (e) {
    console.log("Should be #3 - 'this' override: " + this.name, e);
}, { name: "I'm not Y." });

Y.subscribe("test", "before", function (e, nickname) {
    console.log("Should be #4 - arg: " + nickname, e);
}, null, "Tito");

Y.on({
    test: function (e) { console.log("Should be #5", e); },
    foo: function (e) { console.log("foo from Y", e); },
    bar: function (e) { console.log("bar 1", e); }
});

Y.subscribe("test", "middle", function (e) {
    console.log("Should NOT be logged.  'middle' is not a known phase.", e);
});

Y.after("bar", function (e) {
    console.log("bar - after", e);
});

Y.on("onetime", function (e) {
    console.log("Fire once event - before", e);
});

Y.after("onetime", function (e) {
    console.log("Fire once event - after", e);
});

Y.fire("test", { data: "This is data from fire" });
Y.fire("foo");
Y.fire("bar");
Y.fire("onetime");

Y.detach();

Y.on("bar", function (e) {
    e.preventDefault();
});
Y.on("onetime", function (e) {
    console.log("Fire once event - subscribe 'before' after fired");
});
Y.after("onetime", function (e) {
    console.log("Fire once event - subscribe 'after' after fired");
});

Y.fire("test", { data: "hopefully this does not show up" });
Y.fire("bar");
});
</script>
</body>
</html>
